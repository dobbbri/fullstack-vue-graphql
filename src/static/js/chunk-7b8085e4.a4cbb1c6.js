(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b8085e4"],{"366c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.getPost?s("v-container",{attrs:{"my-5":"",flexbox:"",center:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card",{staticClass:"card"},[s("v-card-title",{staticClass:"card__title"},[s("h1",[t._v(t._s(t.getPost.title))]),t.user?[s("v-btn",{attrs:{large:"",icon:""},on:{click:t.toggleLike}},[s("v-icon",{attrs:{color:t.checkIfPostLiked(t.getPost._id)?"error":"grey"}},[t._v("\n                fas fa-heart\n              ")])],1)]:[s("v-icon",{staticClass:"ml-3 mr-2",attrs:{color:"grey"}},[t._v("\n              fas fa-heart\n            ")])],s("h3",{staticClass:"font-weight-light text-uppercase"},[t._v("\n            "+t._s(t.getPost.likes)+" "+t._s(1!==t.getPost.likes?"likes":"like")+"\n          ")]),s("v-spacer"),s("v-btn",{attrs:{large:"",icon:""}},[s("v-icon",{attrs:{color:"primary"},on:{click:function(e){t.$router.go(-1)}}},[t._v("fas fa-chevron-circle-left")])],1)],2),s("v-tooltip",{attrs:{top:""}},[s("span",[t._v("Click to enlarge image")]),s("v-responsive",{attrs:{slot:"activator"},on:{click:t.showDialog},slot:"activator"},[s("img",{attrs:{src:t.getPost.imageUrl,alt:""}})])],1),s("v-dialog",{staticClass:"modal",attrs:{fullscreen:"","hide-overlay":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-btn",{staticClass:"modal__close",attrs:{icon:""},on:{click:t.closeDialog}},[s("v-icon",{attrs:{color:"#fff"}},[t._v("fas fa-times")])],1),s("img",{staticClass:"modal__image",attrs:{src:t.getPost.imageUrl,alt:""}})],1),s("v-card-text",[t._l(t.getPost.categories,function(e,a){return s("span",{key:a},[s("v-chip",{staticClass:"mb-3",class:{"ml-0":0===a},attrs:{color:"accent","text-color":"white"}},[t._v("\n              "+t._s(e)+"\n            ")])],1)}),t.getPost.description?s("h3",{staticClass:"font-weight-light mb-0 mt-3 card__subtitle"},[t._v("\n            "+t._s(t.getPost.description)+"\n          ")]):t._e()],2)],1)],1)],1),t.user?s("v-layout",{staticClass:"mt-3",attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-form",{on:{submit:function(t){t.preventDefault()}}},[s("v-layout",{attrs:{row:""}},[s("v-text-field",{attrs:{label:"Add a comment",clearable:"","clear-icon":"fas fa-times","prepend-icon":"fas fa-comment","append-outer-icon":t.messageBody&&"fas fa-paper-plane",type:"text"},on:{"click:append-outer":t.addPostMessage},model:{value:t.messageBody,callback:function(e){t.messageBody=e},expression:"messageBody"}})],1)],1)],1)],1):t._e(),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("h2",{staticClass:"font-weight-bold my-3"},[t._v("Comments")]),s("v-list",{attrs:{subheader:"","two-line":""}},[s("v-subheader",[t._v(t._s(t.getPost.messages.length)+" comments")]),t._l(t.getPost.messages,function(e){return[s("v-divider",{key:e._id}),s("v-list-tile",{key:e.title,attrs:{avatar:"",inset:""}},[s("v-list-tile-avatar",[s("img",{attrs:{src:e.messageUser.avatar,alt:""}})]),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n                "+t._s(e.messageBody)+"\n              ")]),s("v-list-tile-sub-title",[t._v("\n                "+t._s(e.messageUser.username)+"\n                "),s("span",{staticClass:"text--grey lighten-1 hidden-xs-only"},[t._v(t._s(e.messageDate))])])],1),s("v-list-tile-action",{staticClass:"hidden-xs-only"},[s("v-icon",{attrs:{color:t.checkIfOwnMessage(e)?"primary":"grey"}},[t._v("fas fa-comment-dots")])],1)],1)]})],2)],1)],1)],1):t._e()},o=[],r=s("2f62"),i=s("39ff");function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},a=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),a.forEach(function(e){l(t,e,s[e])})}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c={name:"Post",props:["postId"],data:function(){return{dialog:!1,messageBody:"",postLiked:!1}},apollo:{getPost:{query:i["e"],variables:function(){return{postId:this.postId}}}},computed:n({},Object(r["b"])(["user","userFavorites"])),methods:{showDialog:function(){window.innerWidth>600&&(this.dialog=!this.dialog,this.$disableHTMLScroll())},closeDialog:function(){this.dialog=!this.dialog,this.$enableHTMLScroll()},addPostMessage:function(){var t=this;this.$apollo.mutate({mutation:i["b"],variables:{messageBody:this.messageBody,userId:this.user._id,postId:this.postId},update:function(e,s){var a=s.data.addPostMessage,o=e.readQuery({query:i["e"],variables:{postId:t.postId}});o.getPost.messages.unshift(a),e.writeQuery({query:i["e"],variables:{postId:t.postId},data:o})}}).then(function(){return t.messageBody=""}).catch(function(t){return console.error(t)})},likePost:function(){var t=this;this.$apollo.mutate({mutation:i["i"],variables:{postId:this.postId,username:this.user.username},update:function(e){var s=e.readQuery({query:i["e"],variables:{postId:t.postId}});s.getPost.likes++,e.writeQuery({query:i["e"],variables:{postId:t.postId},data:s})}}).then(function(e){var s=e.data,a=n({},t.user,{favorites:s.likePost.favorites});t.$store.commit("setUser",a)}).catch(function(t){return console.error(t)})},unlikePost:function(){var t=this;this.$apollo.mutate({mutation:i["m"],variables:{postId:this.postId,username:this.user.username},update:function(e){var s=e.readQuery({query:i["e"],variables:{postId:t.postId}});s.getPost.likes--,e.writeQuery({query:i["e"],variables:{postId:t.postId},data:s})}}).then(function(e){var s=e.data,a=n({},t.user,{favorites:s.unlikePost.favorites});t.$store.commit("setUser",a)}).catch(function(t){return console.error(t)})},toggleLike:function(){this.postLiked?this.unlikePost():this.likePost()},checkIfOwnMessage:function(t){return this.user&&this.user._id===t.messageUser._id},checkIfPostLiked:function(t){return this.userFavorites&&this.userFavorites.some(function(e){return e._id===t})?(this.postLiked=!0,!0):(this.postLiked=!1,!1)}}},u=c,d=(s("b1d6"),s("2877")),v=Object(d["a"])(u,a,o,!1,null,"984a8a50",null);v.options.__file="Post.vue";e["default"]=v.exports},aa0f:function(t,e,s){},b1d6:function(t,e,s){"use strict";var a=s("aa0f"),o=s.n(a);o.a}}]);
//# sourceMappingURL=chunk-7b8085e4.a4cbb1c6.js.map